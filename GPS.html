<head>
<style>
.back
{
background:#f3f3f3;
width:1200px;
height:700px;
}
</style>
</head>
<body>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=UBAhnYbt6oGpDPZSMReoUgKKdpDdBKad"></script>
 <script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/demo/convertor.js"></script>
<script>
function BDpos(){
var Bjd=-1;
var Bwd=-1
let BMap=window.BMap;
let geolocation=new BMap.Geolocation()
geolocation.enableSDKLocation();
geolocation.getCurrentPosition(function (r)
{
if(this.getStatus()==0)
{
Bjd=r['latitude'];
Bwd=r['longitude'];
var stri=Bjd+','+Bwd;
var sh=document.getElementById('jwd');
sh.innerHTML=stri;
console.log(stri);
console.log(r);
}
}
)
}
</script>


<script>
//西北41.836082,123.399581  东南41.831833,123.411901
var x;
var jd="-";
var wd="-";
function getLoc()
{x=document.getElementById('jwd');
if(navigator.geolocation)
{
navigator.geolocation.getCurrentPosition(showPosition,showError);
}
else
{
x.innerHTML="浏览器不支持定位";
}
function showPosition(position)
{
wd=wd+position.coords.latitude;
jd=jd+position.coords.longitude;
x.innerHTML=wd+','+jd;
}
function showError(error)
{
switch(error.code)
{
case error.PERMISSION_DENIED:
{x.innerHTML="用户不允许定位" ;
break;}
case error.POSITION_UNAVAILABLE:
{x.innerHTML="无法获取当前位置"; 
break;}
case error.TIMEOUT:
{x.innerHTML="获取地理位置超时" ;
break;}
case error.UNKNOWN_ERROR:
{x.innerHTML="未知错误" ;
break;}
}
}




}
</script>
<div class="back">
GPS定位测试
</div>
<div>经纬度：<button onclick="BDpos()">点击</button>
<div id="jwd">0,0
</div>
</div>
</body>


